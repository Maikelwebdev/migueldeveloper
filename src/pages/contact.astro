---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

const email = "miguelangelwebdev@gmail.com";
---

<Layout title="Contact - Migueldeveloper">
  <main class="flex-shrink-0">
    <Navbar currentPage="contact" />
    
    <section class="py-5 mt-5">
      <div class="container px-5">
        <div class="text-center mb-5 reveal">
          <h1 class="display-4 fw-bolder" data-i18n="contact.title">Contacto Rápido</h1>
          <p class="lead text-muted" data-i18n="contact.subtitle">¡Conectemos!</p>
        </div>

        <div class="row g-4 justify-content-center">
          <div class="col-12 col-md-6 col-lg-4">
            <a href="https://www.linkedin.com/in/miguelangelmartinezdeveloper/" target="_blank" rel="noopener noreferrer" class="contact-card linkedin reveal">
              <div class="card-icon">
                <i class="bi bi-linkedin"></i>
              </div>
              <h3>LinkedIn</h3>
              <p class="text-muted mb-0">linkedin.com/in/miguelangelmartinezdeveloper</p>
            </a>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <a href="https://github.com/Maikelwebdev/migueldeveloper.com" target="_blank" rel="noopener noreferrer" class="contact-card github reveal">
              <div class="card-icon">
                <i class="bi bi-github"></i>
              </div>
              <h3>GitHub</h3>
              <p class="text-muted mb-0">github.com/Maikelwebdev</p>
            </a>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <a href={`mailto:${email}`} class="contact-card email reveal">
              <div class="card-icon">
                <i class="bi bi-envelope"></i>
              </div>
              <h3>Email</h3>
              <p class="text-muted mb-0">{email}</p>
            </a>
          </div>

          <div class="col-12 col-md-6 col-lg-4">
            <button class="contact-card copy-btn reveal" id="copyEmailBtn" data-email={email}>
              <div class="card-icon">
                <i class="bi bi-clipboard"></i>
              </div>
              <h3 data-i18n="contact.copyEmail">Copiar Email</h3>
              <p class="text-muted mb-0" id="copyFeedback">{email}</p>
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<script is:inline>
  document.addEventListener('astro:page-load', () => {
    const copyBtn = document.getElementById('copyEmailBtn');
    const feedback = document.getElementById('copyFeedback');
    
    if (copyBtn) {
      copyBtn.addEventListener('click', async () => {
        const email = copyBtn.getAttribute('data-email');
        try {
          await navigator.clipboard.writeText(email);
          feedback.textContent = '¡Copiado!';
          feedback.classList.add('copied');
          setTimeout(() => {
            feedback.textContent = email;
            feedback.classList.remove('copied');
          }, 2000);
        } catch (err) {
          console.error('Error al copiar:', err);
        }
      });
    }

    applyTranslations();
  });

  function applyTranslations() {
    const lang = localStorage.getItem('lang') || 'es';
    const translations = {
      es: {
        "contact.title": "Contacto Rápido",
        "contact.subtitle": "¡Conectemos!",
        "contact.copyEmail": "Copiar Email",
        "contact.copied": "¡Copiado!"
      },
      en: {
        "contact.title": "Quick Contact",
        "contact.subtitle": "Let's Connect!",
        "contact.copyEmail": "Copy Email",
        "contact.copied": "Copied!"
      }
    };

    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (key && translations[lang]?.[key]) {
        el.textContent = translations[lang][key];
      }
    });
  }
</script>

<style>
  .contact-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    border-radius: 16px;
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow);
    text-decoration: none;
    color: var(--text-color);
    transition: all 0.3s ease;
    min-height: 200px;
    cursor: pointer;
  }

  .contact-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
  }

  .contact-card.linkedin:hover {
    border-color: #0A66C2;
    background: rgba(10, 102, 194, 0.1);
  }

  .contact-card.github:hover {
    border-color: #fff;
    background: rgba(255, 255, 255, 0.1);
  }

  .contact-card.email:hover {
    border-color: var(--primary);
    background: rgba(30, 48, 243, 0.1);
  }

  .card-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
  }

  .card-icon i {
    font-size: 1.5rem;
    color: white;
  }

  .contact-card h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .contact-card p {
    font-size: 0.875rem;
  }

  .copy-btn {
    background: var(--card-bg);
    border: none;
    width: 100%;
    font-family: inherit;
  }

  .copy-btn:focus {
    outline: none;
  }

  #copyFeedback.copied {
    color: #198754 !important;
    font-weight: 600;
  }

  .row {
    --bs-gutter-x: 1.5rem;
  }

  @media (max-width: 991px) {
    .row {
      max-width: 500px;
      margin: 0 auto;
    }
  }
</style>
